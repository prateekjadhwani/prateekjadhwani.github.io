<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Payment Request API</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="//prateekjadhwani.github.io/themes/Casper/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//prateekjadhwani.github.io/themes/Casper/assets/css/screen.css?v=1.0.0" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="https://prateekjadhwani.github.io/2017/07/07/Payment-Request-A-P-I.html" />
    
    <meta property="og:site_name" content="Prateek Jadhwani" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Payment Request API" />
    <meta property="og:description" content="So I recently came across a browser specification called Payment Request API. Its rare to come across a totally new api while browsing the internet, so I decided to look into it. Here is the link to the Editor&amp;#8217;..." />
    <meta property="og:url" content="https://prateekjadhwani.github.io/2017/07/07/Payment-Request-A-P-I.html" />
    <meta property="article:published_time" content="2017-07-07T04:00:00.000Z" />
    <meta property="article:modified_time" content="2018-02-12T16:39:58.179Z" />
    <meta property="article:tag" content="PaymentRequest" />
    <meta property="article:tag" content="PaymentRequestAPI" />
    <meta property="article:tag" content="spec" />
    <meta property="article:tag" content="specification" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Payment Request API" />
    <meta name="twitter:description" content="So I recently came across a browser specification called Payment Request API. Its rare to come across a totally new api while browsing the internet, so I decided to look into it. Here is the link to the Editor&amp;#8217;..." />
    <meta name="twitter:url" content="https://prateekjadhwani.github.io/2017/07/07/Payment-Request-A-P-I.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Prateek Jadhwani",
    "author": {
        "@type": "Person",
        "name": "Prateek Jadhwani",
        "image": "https://avatars0.githubusercontent.com/u/2219900?v=4",
        "url": "undefined/author/undefined",
        "sameAs": "https://prateekjadhwani.github.io"
    },
    "headline": "Payment Request API",
    "url": "https://prateekjadhwani.github.io/2017/07/07/Payment-Request-A-P-I.html",
    "datePublished": "2017-07-07T04:00:00.000Z",
    "dateModified": "2018-02-12T16:39:58.179Z",
    "keywords": "PaymentRequest,  PaymentRequestAPI,  spec,  specification",
    "description": "So I recently came across a browser specification called Payment Request API. Its rare to come across a totally new api while browsing the internet, so I decided to look into it. Here is the link to the Editor&amp;#8217;..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Prateek Jadhwani" href="https://prateekjadhwani.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template tag-Payment-Request tag-Payment-Request-A-P-I tag-spec tag-specification">

    


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="https://prateekjadhwani.github.io">Home</a>
        <!-- <a class="subscribe-button icon-feed" href="https://prateekjadhwani.github.io/rss/">Subscribe</a> -->
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-Payment-Request tag-Payment-Request-A-P-I tag-spec tag-specification">

        <header class="post-header">
            <h1 class="post-title">Payment Request API</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2017-07-07">07 July 2017</time>  on <a href="https://prateekjadhwani.github.io/tag/Payment-Request">PaymentRequest</a>, <a href="https://prateekjadhwani.github.io/tag/Payment-Request-A-P-I"> PaymentRequestAPI</a>, <a href="https://prateekjadhwani.github.io/tag/spec"> spec</a>, <a href="https://prateekjadhwani.github.io/tag/specification"> specification</a>
            </section>
        </header>

        <section class="post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>So I recently came across a browser specification called <a href="https://www.chromestatus.com/feature/5639348045217792">Payment Request API</a>. Its rare to come across a totally new api while browsing the internet, so I decided to look into it. Here is the <a href="https://w3c.github.io/browser-payment-api/">link to the Editor&#8217;s Draft</a> for this specification in case it has piqued your interest.</p>
</div>
<div class="paragraph">
<p>Reading the Editor&#8217;s draft is confusing and tough. I am just glad that  the chrome dev team <a href="https://developers.google.com/web/fundamentals/discovery-and-monetization/payment-request/">wrote a really good documentation</a> on this technology and how to use it.</p>
</div>
<div class="paragraph">
<p>At the time of writing of this article, chrome 60 is due release, but the PaymentRequest API is supported on chrome canary. So the demo has been tested on chrome canary and no other browser. So without any further delay, here is the demo.</p>
</div>
<p data-height="297" data-theme-id="3991" data-slug-hash="QgVxMN" data-default-tab="result" data-user="prateekjadhwani" data-embed-version="2" data-pen-title="Payment Request API DEMO" class="codepen">See the Pen <a href="https://codepen.io/prateekjadhwani/pen/QgVxMN/">Payment Request API DEMO</a> by Prateek Jadhwani (<a href="https://codepen.io/prateekjadhwani">@prateekjadhwani</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
</div>
</div>
<div class="sect1">
<h2 id="_explanation">Explanation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Coming back to the explanation of what I have done in the demo, if you are familiar wiht online payment, then it will be really easy for you to understand. Every checkout process requires three things, type of payment and payment information, the total amount (with tax, discount, shipping etc) and optional information like shipping, phone number, etc. And the good thing is, the Payment request API requires these three things in the form of three different parameters as objects.</p>
</div>
<div class="sect3">
<h4 id="_payment_information">Payment information</h4>
<div class="paragraph">
<p>This is the way you can ask the payment Request API to support any payment card (credit or debit)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const supportedPaymentMethods = [
  {
    supportedMethods: ['basic-card']
  }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>And this is the way you can limit the payment method to just visa and mastercard</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const supportedPaymentMethodsTwo = [
  {
    supportedMethods: ['basic-card'],
    data: {
      supportedNetworks: ['visa', 'mastercard'],
      supportedTypes: ['credit'],
    },
  }
];</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also add another type of payment systems like paypal or android pay. This <a href="https://developers.google.com/web/fundamentals/discovery-and-monetization/payment-request/android-pay">link</a> is helpful in configuring, but the process is same</p>
</div>
</div>
<div class="sect3">
<h4 id="_total_amount_information">Total Amount Information</h4>
<div class="paragraph">
<p>You can provide the amount information in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const paymentDetails = {
  total: {
    label: 'Total',
    amount: {
      currency: 'USD',
      value: 0
    }
  }
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can add more information like shipping, tax etc in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const paymentDetails = {
  total: {
    label: 'Total',
    amount: {
      currency: 'USD',
      value: 0
    }
  },
  displayItems: [
    {
      label: 'Shipping Cost',
      amount: {
        currency: 'USD',
        value: 5.75
      }
    },
    {
      label: 'Tax',
      amount: {
        currency: 'USD',
        value: 0.75
      }
    },
  ]
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_extra_options">Extra Options</h4>
<div class="paragraph">
<p>You can ask for more options from the user here in this object. You can either leave it blank or you can add the things that you require for the payment.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const options = {};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or let&#8217;s say you want shipping information, you can go with this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const optionsThree = {
  requestShipping: true
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_getting_the_paymentrequest_object">Getting the PaymentRequest Object</h3>
<div class="paragraph">
<p>Once you are done creating the object for payment information, amount and options, you can create a PaymentRequest Object by passing them in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const request = new PaymentRequest(
  supportedPaymentMethods,
  paymentDetails,
  options
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Thats it!!!</p>
</div>
<div class="paragraph">
<p>Now lets say you have a Pay button and when the user clicks on it, it should let the users enter the payment information. So you can add an event listener on that button that would execute the show method of PaymentRequest API</p>
</div>
<div class="paragraph">
<p>This is how it can be done.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">document.querySelector('.pay1').addEventListener('click', () =&gt; {
  request.show();  // this is a promise
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Just remember that <code>show()</code> method returns a promise so it needs to be handled correctly in the following way</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">document.querySelector('.pay1').addEventListener('click', () =&gt; {
  request1.show()
  .then((response) =&gt; {
    // do stuff
  })
  .catch((e) =&gt; {
    console.log(e);
  });
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>So, now, clicking on the button will show up the pay dialog box where user can enter the details as shown in the screenshot below. After entering correct information, the flow goes into the <code>then()</code> block and when anything goes wrong, or if the user clicks on the cancel button, it goes to the catch block.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="https://raw.githubusercontent.com/prateekjadhwani/prateekjadhwani.github.io/master/images/PaymentRequest.PNG" alt="screenshot">
</div>
</div>
<div class="paragraph">
<p>To close the payment dialog you can use the <code>complete()</code> method as shown in the then() block</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">document.querySelector('.pay1').addEventListener('click', () =&gt; {
  request1.show()
  .then((response) =&gt; {
    // do backend stuff
    console.log(response);

    //close the payment ui
    return response.complete()
  })
  .catch((e) =&gt; {
    console.log(e);
  });
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a fairly new technology / specification and is continuously improving. But it takes care of a lot of things by simply moving everything in the browser layer. And in terms of code, it is fairly easy to implement. But feel free to look through the demo and source code if yo have any questions and/or concerns.</p>
</div>
</div>
</div>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="" style="background-image: url(https://avatars0.githubusercontent.com/u/2219900?v=4)"><span class="hidden">Prateek Jadhwani's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="">Prateek Jadhwani</a></h4>

                    <p>Read <a href="">more posts</a> by this author.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">United States</span>
                    <span class="author-link icon-link"><a href="https://prateekjadhwani.github.io">https://prateekjadhwani.github.io</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=Payment%20Request%20API&amp;url=https://prateekjadhwani.github.io/2017/07/07/Payment-Request-A-P-I.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://prateekjadhwani.github.io/2017/07/07/Payment-Request-A-P-I.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://prateekjadhwani.github.io/2017/07/07/Payment-Request-A-P-I.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


        <section class="post-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'prateekjadhwani'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>


    </article>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="https://prateekjadhwani.github.io">Prateek Jadhwani</a> &copy; 2018</section>
        <section class="poweredby">Proudly published with <a href="http://hubpress.io">HubPress</a></section>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

    <script type="text/javascript" src="//prateekjadhwani.github.io/themes/Casper/assets/js/jquery.fitvids.js?v=1.0.0"></script>
    <script type="text/javascript" src="//prateekjadhwani.github.io/themes/Casper/assets/js/index.js?v=1.0.0"></script>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65947202-1', 'auto');
    ga('send', 'pageview');

    </script>
</body>
</html>

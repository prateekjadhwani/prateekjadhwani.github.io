<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Storage API: Persistent Large Storage for the Web</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="//prateekjadhwani.github.io/themes/Casper/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//prateekjadhwani.github.io/themes/Casper/assets/css/screen.css?v=1.0.0" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="https://prateekjadhwani.github.io/2017/07/28/Storage-A-P-I-Persistent-Large-Storage-for-the-Web.html" />
    
    <meta property="og:site_name" content="Prateek Jadhwani" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Storage API: Persistent Large Storage for the Web" />
    <meta property="og:description" content="TL;DR Early 1990s -Internet User downloads the site and views it on his screen. Reload the page, and resources get downloaded again Early 2005 - App cache User downloads the site, and saves the resources to be used again..." />
    <meta property="og:url" content="https://prateekjadhwani.github.io/2017/07/28/Storage-A-P-I-Persistent-Large-Storage-for-the-Web.html" />
    <meta property="article:published_time" content="2017-07-28T04:00:00.000Z" />
    <meta property="article:modified_time" content="2017-07-28T21:03:58.335Z" />
    <meta property="article:tag" content="StorageAPI" />
    <meta property="article:tag" content="API" />
    <meta property="article:tag" content="specification" />
    <meta property="article:tag" content="javascript" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Storage API: Persistent Large Storage for the Web" />
    <meta name="twitter:description" content="TL;DR Early 1990s -Internet User downloads the site and views it on his screen. Reload the page, and resources get downloaded again Early 2005 - App cache User downloads the site, and saves the resources to be used again..." />
    <meta name="twitter:url" content="https://prateekjadhwani.github.io/2017/07/28/Storage-A-P-I-Persistent-Large-Storage-for-the-Web.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "Prateek Jadhwani",
    "author": {
        "@type": "Person",
        "name": "Prateek Jadhwani",
        "image": "https://avatars0.githubusercontent.com/u/2219900?v=4",
        "url": "undefined/author/undefined",
        "sameAs": "https://prateekjadhwani.github.io"
    },
    "headline": "Storage API: Persistent Large Storage for the Web",
    "url": "https://prateekjadhwani.github.io/2017/07/28/Storage-A-P-I-Persistent-Large-Storage-for-the-Web.html",
    "datePublished": "2017-07-28T04:00:00.000Z",
    "dateModified": "2017-07-28T21:03:58.335Z",
    "keywords": "StorageAPI,  API,  specification,  javascript",
    "description": "TL;DR Early 1990s -Internet User downloads the site and views it on his screen. Reload the page, and resources get downloaded again Early 2005 - App cache User downloads the site, and saves the resources to be used again..."
}
    </script>

    <meta name="generator" content="Ghost ?" />
    <link rel="alternate" type="application/rss+xml" title="Prateek Jadhwani" href="https://prateekjadhwani.github.io/rss" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css">
</head>
<body class="post-template tag-Storage-A-P-I tag-A-P-I tag-specification tag-javascript">

    


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="back-button icon-arrow-left" href="https://prateekjadhwani.github.io">Home</a>
        <!-- <a class="subscribe-button icon-feed" href="https://prateekjadhwani.github.io/rss/">Subscribe</a> -->
    </nav>
</header>

<main class="content" role="main">

    <article class="post tag-Storage-A-P-I tag-A-P-I tag-specification tag-javascript">

        <header class="post-header">
            <h1 class="post-title">Storage API: Persistent Large Storage for the Web</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2017-07-28">28 July 2017</time>  on <a href="https://prateekjadhwani.github.io/tag/Storage-A-P-I">StorageAPI</a>, <a href="https://prateekjadhwani.github.io/tag/A-P-I"> API</a>, <a href="https://prateekjadhwani.github.io/tag/specification"> specification</a>, <a href="https://prateekjadhwani.github.io/tag/javascript"> javascript</a>
            </section>
        </header>

        <section class="post-content">
            <div class="sect1">
<h2 id="_tl_dr">TL;DR</h2>
<div class="sectionbody">
<div class="sect4">
<h5 id="_early_1990s_internet">Early 1990s -Internet</h5>
<div class="paragraph">
<p>User downloads the site and views it on his screen. Reload the page, and resources get downloaded again</p>
</div>
</div>
<div class="sect4">
<h5 id="_early_2005_app_cache">Early 2005 - App cache</h5>
<div class="paragraph">
<p>User downloads the site, and saves the resources to be used again and again, until the browser looses its cache. Painful process. Needed hit and trial to make it work.</p>
</div>
</div>
<div class="sect4">
<h5 id="_2010_local_storage">2010 - Local Storage</h5>
<div class="paragraph">
<p>User gets to save important information in text format over long periods of time. Very easy to use.</p>
</div>
</div>
<div class="sect4">
<h5 id="_2016_service_workers">2016 - Service Workers</h5>
<div class="paragraph">
<p>User gets to save other types of resources and can control the response manually, including the type of file served. But can only save upto a max of 2GB and resources gets cleared if memory is less. Easy to implement.</p>
</div>
</div>
<div class="sect4">
<h5 id="_2017_storage_api">2017 - Storage API</h5>
<div class="paragraph">
<p>User gets to save resources on hard disk after querying for available space without loosing them even if the space is less. Best improvement to storage ever!!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So what is Storage API, and why do we need it. Its simple. With improvement in time, the resources consumed on the web have changed drastically, both in type and size. And looses these resources when the cache clears makes user experience pretty bad. Storage API is the next step in the improvement of storing website resources on a user&#8217;s computer.</p>
</div>
<div class="paragraph">
<p>The Storage API lets the website developer query for the available size on the user&#8217;s computer. And if it has space, with user&#8217;s permission, it can store data in a persistent form, like on a hard drive.</p>
</div>
<div class="paragraph">
<p>The most common scenarios where this specification can be used is for like games (to store game resources) , or a song streaming site( to store songs), or an image editor site (to store layer information). Just imagine, storing these things on a user&#8217;s computer, and user being able to use them while being offline, say on a flight or with choppy network would make the user experience even better.</p>
</div>
<div class="paragraph">
<p>Now that we know what Storage API is and what it can do, lets move on to how to use it and demo. At the time of writing, the APIs worked only on firefox nightly</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_demo">Demo</h2>
<div class="sectionbody">
<p data-height="544" data-theme-id="3991" data-slug-hash="qXOBKo" data-default-tab="js,result" data-user="prateekjadhwani" data-embed-version="2" data-pen-title="qXOBKo" class="codepen">See the Pen <a href="https://codepen.io/prateekjadhwani/pen/qXOBKo/">qXOBKo</a> by Prateek Jadhwani (<a href="https://codepen.io/prateekjadhwani">@prateekjadhwani</a>) on <a href="https://codepen.io">CodePen</a>.</p>
<script async src="https://production-assets.codepen.io/assets/embed/ei.js"></script>
<div class="paragraph">
<p>When you click on the "Check if navigator.storage API&#8217;s can run on your browser" button, it checks whether the APIs can run on your system. Refer <code>checkAPI()</code> function.</p>
</div>
<div class="paragraph">
<p>When you click on the "Estimate Available Space" button, it queries for the space available with the help of <code>navigator.storage.estimate()</code> API. Refer <code>showEstimate()</code> function.</p>
</div>
<div class="paragraph">
<p>When you click on the "Query For User Permission" button, it checks for <code>persistent-storage</code> permission for that particular origin with the help of <code>navigator.permissions.query</code> API and the on getting a <code>status</code> of either <code>granted</code> or <code>prompt</code> shows the dialog for Storage API. Refer <code>queryForPermission()</code> function.</p>
</div>
<div class="paragraph">
<p>When you click on the "Revoke User Permission" button, it revokes the permission granted by clicking in the previous button. In order to make this work, you will need to set the <code>dom.permissions.revoke.enable</code> in <code>about:config</code> URL and toggle the value to <code>true</code>. Once you have revoked the property, you will see the dialog again if you click on the previous button.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Storage API shows the true growth of the web. In all, it holds a really good future; especially for PWAs; but it depends on project to project how it can be leveraged upto its full potential.</p>
</div>
</div>
</div>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="" style="background-image: url(https://avatars0.githubusercontent.com/u/2219900?v=4)"><span class="hidden">Prateek Jadhwani's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="">Prateek Jadhwani</a></h4>

                    <p>Read <a href="">more posts</a> by this author.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">United States</span>
                    <span class="author-link icon-link"><a href="https://prateekjadhwani.github.io">https://prateekjadhwani.github.io</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=Storage%20API%3A%20Persistent%20Large%20Storage%20for%20the%20Web&amp;url=https://prateekjadhwani.github.io/2017/07/28/Storage-A-P-I-Persistent-Large-Storage-for-the-Web.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://prateekjadhwani.github.io/2017/07/28/Storage-A-P-I-Persistent-Large-Storage-for-the-Web.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=https://prateekjadhwani.github.io/2017/07/28/Storage-A-P-I-Persistent-Large-Storage-for-the-Web.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


        <section class="post-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'prateekjadhwani'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>


    </article>

</main>



    <footer class="site-footer clearfix">
        <section class="copyright"><a href="https://prateekjadhwani.github.io">Prateek Jadhwani</a> &copy; 2017</section>
        <section class="poweredby">Proudly published with <a href="http://hubpress.io">HubPress</a></section>
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();      
      </script>

    <script type="text/javascript" src="//prateekjadhwani.github.io/themes/Casper/assets/js/jquery.fitvids.js?v=1.0.0"></script>
    <script type="text/javascript" src="//prateekjadhwani.github.io/themes/Casper/assets/js/index.js?v=1.0.0"></script>

    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-65947202-1', 'auto');
    ga('send', 'pageview');

    </script>
</body>
</html>
